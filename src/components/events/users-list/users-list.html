<div class="component-users-list">
  <div class="sc-filter">
    <div class="sc-filter-item">
      <label class="sc-filter-label">Status: </label>
      <select class="sc-filter-input" id="type" v-model="filter.status" required name="type" v-validate="'required'">
        <option v-for="status in event_status" :value="status">{{status}}</option>
      </select>
    </div>
    <div class="sc-filter-item sc-filter-button">
      <input
        type="submit"
        value="Filter"
        class="sc-btn sc-btn-secondary sc-btn-md sc-btn-rounded sc-mr-10"
        @click="filterData"
      />
      <input
        type="button"
        value="Reset"
        class="sc-btn sc-btn-secondary sc-btn-md sc-btn-rounded sc-mr-10"
        @click="resetAll"
      />
      <input
        type="button"
        value="Export Data"
        class="sc-btn sc-btn-secondary sc-btn-md sc-btn-rounded sc-mr-10"
        @click="exportData"
      />
      <DownloadExcel
        class="sc-btn sc-btn-secondary sc-btn-md sc-btn-rounded sc-uppercase"
        style="min-width: 140px"
        :fields="json_fields"
        :fetch="downloadExcel"
        type="csv"
      >
        <i class="fa fa-download"></i> Full Excel
      </DownloadExcel>
    </div>
  </div>
  <div class="sc-table-responsive">
  <table class="sc-table">
    <thead>
      <tr style="height: 25px">
        <th style="width: 150px"># ID</th>
        <th style="width: 250px">Name</th>
        <th style="width: 200px">
          Username
          <sortField v-show="!is_loading" field="user_name" :sort="sortParam" @sort="sort" />
        </th>
        <th style="width: 200px">
          Email
          <sortField v-show="!is_loading" field="email" :sort="sortParam" @sort="sort" />
        </th>
        <th style="width: 150px">
          Status
          <sortField v-show="!is_loading" field="category" :sort="sortParam" @sort="sort" />
        </th>
        <th style="width: 300px">Review</th>
        <th style="width: 150px">Action</th>
      </tr>
    </thead>
    <tbody>
      <div class="loader" v-if="is_loading" style="width: 100%; text-align: center">
        <ball-pulse-loader color="#000000" size="20px"></ball-pulse-loader>
      </div>

      <tr v-for="(participant, idx) in data" :key="idx" v-if="participant">
        <td>{{participant._id.substring(10)}}</td>
        <td>{{ participant.user.name }}</td>
        <td>{{participant.user.user_name}}</td>
        <td>{{maskEmail(participant.user.email || 'NA')}}</td>
        <td>{{participant.status}}</td>
        <td>{{participant.review && participant.review.content ? participant.review.content : '--'}}</td>
        <td>
          <div class="sc-table-btn">
            <span
              title="Preview"
              aria-hidden="true"
              class="fa fa-search sc-table-btn-item sc-detail"
              @click="showReview(participant.review)"
            >
            </span>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
  </div>
  <div class="sc-pagination-page">
    <div class="sc-pagination-content">
      <div class="sc-pagination-text-container">
        <div class="sc-pagination-text">Page: {{ pagination.currentPage }} out of {{ pagination.totalPage}}</div>
        <div class="sc-pagination-text">Total Record: {{ pagination.currentTotalRecord }}</div>
      </div>
      <div class="table-pagination">
        <DisplayPerPage :all="all" @display="display"></DisplayPerPage>
        <Pagination :limit="pagination.limit" :skip="pagination.skip" :total="pagination.totalPage" @page="setSkip" />
      </div>
    </div>
  </div>

  <modal
    ref="modal_review"
    :medium="true"
    :force="true"
    okText="Yes"
    class="modal-confirm-approve-reject modal-default-user-list"
    okClass="none"
    :cancelClass="'btn btn-normal btn-sm no-rad'"
    @ok=""
  >
    <div v-if="review">
      <p class="mb-5">User Review</p>
      <p v-if="review.content" class="mb-3 font-weight-bold text-left">{{review.content}}</p>
      <hr />
      <p class="mb-5">User Ratings</p>
      <div class="row px-3">
        <div class="col-3 mb-4">
          <p>Pengisi Acara</p>
          <p>
            <i
              class="fa fa-star"
              v-for="j in 5"
              style="margin: 2px"
              :style="j < review.star_speakers ? 'color:#DA709E' : 'color:gainsboro'"
            ></i>
          </p>
        </div>
        <div class="col-3 mb-4">
          <p>Activity</p>
          <p>
            <i
              class="fa fa-star"
              v-for="j in 5"
              style="margin: 5px 2px"
              :style="j < review.star_activity ? 'color:#DA709E' : 'color:gainsboro'"
            ></i>
          </p>
        </div>
        <div class="col-3 mb-4">
          <p>Topik</p>
          <p>
            <i
              class="fa fa-star"
              v-for="j in 5"
              style="margin: 5px 2px"
              :style="j < review.star_topic ? 'color:#DA709E' : 'color:gainsboro'"
            ></i>
          </p>
        </div>
        <div class="col-3 mb-4">
          <p>Location & Venue</p>
          <p>
            <i
              class="fa fa-star"
              v-for="j in 5"
              style="margin: 5px 2px"
              :style="j < review.star_place ? 'color:#DA709E' : 'color:gainsboro'"
            ></i>
          </p>
        </div>
        <div class="col-3 mb-4">
          <p>Food & Beverage</p>
          <p>
            <i
              class="fa fa-star"
              v-for="j in 5"
              style="margin: 5px 2px"
              :style="j < review.star_fnb ? 'color:#DA709E' : 'color:gainsboro'"
            ></i>
          </p>
        </div>
        <div class="col-3 mb-4">
          <p>Decoration</p>
          <p>
            <i
              class="fa fa-star"
              v-for="j in 5"
              style="margin: 5px 2px"
              :style="j < review.star_decoration ? 'color:#DA709E' : 'color:gainsboro'"
            ></i>
          </p>
        </div>
        <div class="col-3 mb-4">
          <p>Value for money</p>
          <p>
            <i
              class="fa fa-star"
              v-for="j in 5"
              style="margin: 5px 2px"
              :style="j < review.star_value_for_money ? 'color:#DA709E' : 'color:gainsboro'"
            ></i>
          </p>
        </div>
      </div>
    </div>
    <p v-else>Empty Data</p>
  </modal>
</div>
